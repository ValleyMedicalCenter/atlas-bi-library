!function(){"use strict";void 0===window.aglToken&&(window.addEventListener("message",(function(event){event&&event.data&&event.data.error&&document.dispatchEvent(new CustomEvent("notification",{cancelable:!0,detail:{value:event.data.error}})),event&&event.data&&event.data.token&&void 0===window.aglToken?(console.log("AGL handshake succeeded"),window.aglToken=event.data.token,setCookie("EPIC",1,99),getCookie("AGL")||(setCookie("AGL",1,99),window.location.reload()),document.addEventListener("click",(function(event){if(event.target.closest("a[href]")){var target=event.target.closest("a[href]"),aglType=target.getAttribute("href"),load={};switch(aglType){case"AR_ITM_RECORDVIEWER":load["".concat(target.dataset.ini,"RecordID")]=target.dataset.id;break;case"WM_DASHBOARD_LAUNCHER":load.DashboardID=target.dataset.id;break;case"AC_RW_STATUS":load.ReportID=target.dataset.id;break;case"BI_ITM_SLICERDICER":"FDM"===target.dataset.ini?load.DataModelID=target.dataset.id:load.ReportRunID=target.dataset.id;break;case"WM_ITM_METRIC_EDITOR":load.IDNRecordID=target.dataset.id;break;case"CST_WEB_BROWSER":var url=target.dataset.url;"Y"===target.dataset.hyperspace&&(url+="&EPIC=1"),load.URL=url,load.Caption=target.dataset.name;break;case"WM_ITM_COMPONENT_EDITOR":load.IDBRecordID=target.dataset.id;break;case"AC_RW_STATUS_TEMPLATE":aglType="AC_RW_STATUS",load.ReportModelToLaunch=target.dataset.templateid;break;case"AC_REPORT_SETTINGS_WEB":load.HGRRecordID=target.dataset.id,"HRX"===target.dataset.ini&&(load.InitialReportID=target.dataset.id,load.HGRRecordID=target.dataset.templateid)}Object.entries(load).length>0&&(event.preventDefault(),window.parent.postMessage({token:window.aglToken,action:"Epic.Clinical.Informatics.Web.LaunchActivity",args:{ActivityKey:"ATLAS_".concat(aglType),Parameters:load}},"*"))}}))):void 0!==window.aglToken?console.log("agl already connected."):console.log("no agl listener found.")}),!1),window.parent.postMessage({action:"Epic.Clinical.Informatics.Web.InitiateHandshake"},"*"))}();
