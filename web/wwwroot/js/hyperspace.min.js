!function(){"use strict";window.aglToken=undefined,1!==Number(getUrlVars().EPIC)&&1!==Number(getCookie("EPIC"))||(setCookie("EPIC",1,99),window.aglToken===undefined&&(window.addEventListener("message",function(e){e&&e.data&&e.data.error&&document.dispatchEvent(new CustomEvent("notification",{cancelable:!0,detail:{value:e.data.error}})),e&&e.data&&e.data.token&&window.aglToken===undefined&&(console.log("AGL handshake succeeded"),window.aglToken=e.data.token,setCookie("AGL",1,99),document.addEventListener("click",function(a){if(a.target.closest("a[href]")){var t=a.target.closest("a[href]");let e=t.getAttribute("href");var d={};switch(e){case"AR_ITM_RECORDVIEWER":d[t.dataset.ini+"RecordID"]=t.dataset.id;break;case"WM_DASHBOARD_LAUNCHER":d.DashboardID=t.dataset.id;break;case"AC_RW_STATUS":d.ReportID=t.dataset.id;break;case"BI_ITM_SLICERDICER":"FDM"===t.dataset.ini?d.DataModelID=t.dataset.id:d.ReportRunID=t.dataset.id;break;case"WM_ITM_METRIC_EDITOR":d.IDNRecordID=t.dataset.id;break;case"CST_WEB_BROWSER":{let e=t.dataset.url;"Y"===t.dataset.hyperspace&&(e+="&EPIC=1"),d.URL=e,d.Caption=t.dataset.name;break}case"WM_ITM_COMPONENT_EDITOR":d.IDBRecordID=t.dataset.id;break;case"AC_RW_STATUS_TEMPLATE":e="AC_RW_STATUS",d.ReportModelToLaunch=t.dataset.templateid;break;case"AC_REPORT_SETTINGS_WEB":d.HGRRecordID=t.dataset.id,"HRX"===t.dataset.ini&&(d.InitialReportID=t.dataset.id,d.HGRRecordID=t.dataset.templateid)}0<Object.entries(d).length&&(a.preventDefault(),window.parent.postMessage({token:window.aglToken,action:"Epic.Clinical.Informatics.Web.LaunchActivity",args:{ActivityKey:"ATLAS_"+e,Parameters:d}},"*"))}}))},!1),window.parent.postMessage({action:"Epic.Clinical.Informatics.Web.InitiateHandshake"},"*")))}();