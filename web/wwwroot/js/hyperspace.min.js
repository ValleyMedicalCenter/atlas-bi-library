!function(){"use strict";window.aglToken=undefined,1!==Number(getUrlVars().EPIC)&&1!==Number(getCookie("EPIC"))||(setCookie("EPIC",1,99),window.aglToken===undefined&&(window.addEventListener("message",function(e){e&&e.data&&e.data.error&&document.dispatchEvent(new CustomEvent("notification",{cancelable:!0,detail:{value:e.data.error}})),e&&e.data&&e.data.token&&window.aglToken===undefined&&(console.log("AGL handshake succeeded"),window.aglToken=e.data.token,setCookie("AGL",1,99),document.addEventListener("click",function(e){if(e.target.closest("a[href]")){var a=e.target.closest("a[href]"),t=a.getAttribute("href"),d={};switch(t){case"AR_ITM_RECORDVIEWER":d["".concat(a.dataset.ini,"RecordID")]=a.dataset.id;break;case"WM_DASHBOARD_LAUNCHER":d.DashboardID=a.dataset.id;break;case"AC_RW_STATUS":d.ReportID=a.dataset.id;break;case"BI_ITM_SLICERDICER":"FDM"===a.dataset.ini?d.DataModelID=a.dataset.id:d.ReportRunID=a.dataset.id;break;case"WM_ITM_METRIC_EDITOR":d.IDNRecordID=a.dataset.id;break;case"CST_WEB_BROWSER":var i=a.dataset.url;"Y"===a.dataset.hyperspace&&(i+="&EPIC=1"),d.URL=i,d.Caption=a.dataset.name;break;case"WM_ITM_COMPONENT_EDITOR":d.IDBRecordID=a.dataset.id;break;case"AC_RW_STATUS_TEMPLATE":t="AC_RW_STATUS",d.ReportModelToLaunch=a.dataset.templateid;break;case"AC_REPORT_SETTINGS_WEB":d.HGRRecordID=a.dataset.id,"HRX"===a.dataset.ini&&(d.InitialReportID=a.dataset.id,d.HGRRecordID=a.dataset.templateid)}0<Object.entries(d).length&&(e.preventDefault(),window.parent.postMessage({token:window.aglToken,action:"Epic.Clinical.Informatics.Web.LaunchActivity",args:{ActivityKey:"ATLAS_".concat(t),Parameters:d}},"*"))}}))},!1),window.parent.postMessage({action:"Epic.Clinical.Informatics.Web.InitiateHandshake"},"*")))}();