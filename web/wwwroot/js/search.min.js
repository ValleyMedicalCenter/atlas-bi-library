!function(){"use strict";!function(){let start;const d=document,w=window,grp=d.querySelector("#search-form"),m=d.querySelectorAll(".body-mainCtn")[0],i=grp.querySelectorAll("input")[0];let atmr,sAjx=null;const a=document.createElement("a");document.addEventListener("click",(function(event){event.target.closest("#nav-search")&&(document.documentElement.scrollTop=0,document.body.scrollTop=0)}));const oldHref=w.location.pathname.toLowerCase().startsWith("/search")?"/":w.location.href;function replaceUrlParameter(url,parameterName,parameterValue){null===parameterValue&&(parameterValue="");const pattern=new RegExp("\\b("+parameterName+"=).*?(&|#|$)");return url.search(pattern)>=0?""===parameterValue?url.replace(pattern,""):url.replace(pattern,"$1"+parameterValue+"$2"):(url=url.replace(/[?#]$/,""),""===parameterValue?url:url+(url.indexOf("?")>0?"&":"?")+parameterName+"="+parameterValue)}function ajaxSearch(value,url){document.querySelector(".body-mainCtn")&&(document.querySelector(".body-mainCtn").style.opacity=.5);const urlPath="/search"===window.location.pathname.toLowerCase();let s=url;urlPath?(value=encodeURIComponent(value||function(parameters,url){const href=decodeURIComponent(url||window.location.href),value=new RegExp("[?&]"+parameters+"=([^&#]*)","i").exec(href);return value?value[1]:null}("Query",url)),s=url||replaceUrlParameter(replaceUrlParameter(window.location.href.replace(window.location.origin,""),"Query",value),"PageIndex","")):url?(console.log("here"),console.log(url),s=url):(s="/Search?Query="+value,"/users"===window.location.pathname.toLowerCase()?s+="&type=users":"/groups"===window.location.pathname.toLowerCase()&&(s+="&type=groups"));const u=s.replace("/Search?Query=","");start=new Date,null!=value&&value.length>0||void 0!==url?(document.documentElement.scrollTop=0,document.body.scrollTop=0,a.href=url||oldHref,history.pushState({state:"ajax",search:value},document.title,w.location.origin+"/Search?Query="+encodeURI(decodeURI(u))),null!==sAjx&&sAjx.abort(),sAjx=new XMLHttpRequest,sAjx.open("get",s,!0),sAjx.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),sAjx.setRequestHeader("X-Requested-With","XMLHttpRequest"),sAjx.send(),sAjx.addEventListener("load",(function(){l(sAjx.responseText,a,m,d,atmr,s,u,value)}))):d.dispatchEvent(new CustomEvent("load-ajax",{detail:oldHref}))}const l=function(t,a,m,d,atmr,s,u,value){document.querySelector(".side-links")&&(document.querySelector(".side-links").innerHTML=""),document.querySelector("#AdColTwo")&&(document.querySelector("#AdColTwo").innerHTML=""),m.style.visibility="visible",m.style.removeProperty("overflow"),m.innerHTML=t;const sc=Array.prototype.slice.call(m.querySelectorAll('script:not([type="application/json"])'));for(const element of sc){const q=document.createElement("script");q.innerHTML=element.innerHTML,q.type="text/javascript",q.setAttribute("async","true"),m.append(q),element.remove()}d.title="Search: "+value+" | Atlas BI Library",history.replaceState({state:"ajax",search:value},document.title,w.location.origin+"/Search?Query="+encodeURI(decodeURI(u))),setTimeout((function(){document.dispatchEvent(new CustomEvent("analytics-post",{cancelable:!0,detail:{value:Date.now()-start.getTime(),type:"newpage"}}))}),3e3),document.dispatchEvent(new CustomEvent("related-reports")),document.dispatchEvent(new CustomEvent("ajax")),document.dispatchEvent(new CustomEvent("ss-load")),document.dispatchEvent(new CustomEvent("code-highlight")),document.querySelector(".body-mainCtn")&&(document.querySelector(".body-mainCtn").style.opacity="")};grp.addEventListener("click",(function(event){event.stopPropagation()})),grp.addEventListener("submit",(function(event){event.preventDefault()}));let searchTimerId=null;function submit(l){ajaxSearch(null,l)}i.addEventListener("input",(function(){window.clearTimeout(searchTimerId),searchTimerId=window.setTimeout((function(){""!==i.value.trim()&&(ajaxSearch(i.value,null),window.clearTimeout(searchTimerId))}),250)})),i.addEventListener("keydown",(event=>{13===Number(event.keyCode)&&""!==i.value.trim()&&ajaxSearch(i.value,null)})),d.addEventListener("click",(function(event){return event.target.matches(".search-filter input")?(event.preventDefault(),submit(event.target.closest(".search-filter input").value),!1):event.target.matches(".page-link")?(event.target.closest(".search-filter input")&&submit(event.target.closest(".search-filter input").value),!1):void 0}))}(),function(){const vars=getUrlVars();let message;function updateUrl($key){delete vars[$key];const $hash=document.location.hash?"#"+document.location.hash:"";let $parameters=Object.keys(vars).map((function(x){return x+"="+vars[x]})).join("&");$parameters=void 0!==$parameters&&""!==$parameters?"?"+$parameters:"";const $newUrl=window.location.origin+window.location.pathname+$parameters+$hash;history.replaceState({},document.title,$newUrl)}function addMessage($class,$message){const div=document.createElement("div");div.classList.add("notification","is-light",$class,"has-text-centered","my-0");const button=document.createElement("button");button.classList.add("delete"),button.addEventListener("click",(function(){div.remove()})),div.innerHTML="<p><b>"+DOMPurify.sanitize($message)+"</b></p>",div.insertBefore(button,div.firstChild),document.querySelector("body").insertBefore(div,document.querySelector("body").firstChild)}vars.error&&(message=decodeURI(vars.error).replace(/\+/g,/ /),addMessage("is-danger",message),updateUrl("error")),vars.success&&(message=decodeURI(vars.success).replace(/\+/g,/ /),addMessage("is-success",message),updateUrl("success")),vars.warning&&(message=decodeURI(vars.warning).replace(/\+/g,/ /),addMessage("is-warning",message),updateUrl("warning"))}()}();
